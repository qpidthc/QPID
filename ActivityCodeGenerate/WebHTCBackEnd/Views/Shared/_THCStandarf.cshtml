@using WebHTCBackEnd.Language;

@{
    LanguageBase lan = (LanguageBase)ViewData["lan"];
}

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title </title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">   
    <link rel="stylesheet" href="~/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="~/css/nice-select.css">
    <link rel="stylesheet" href="~/css/bootstrap-datepicker.min.css"> 
    <link rel="stylesheet" href="~/css/dataTables.jqueryui.min.css">   
    <link rel="stylesheet"  href="http://code.jquery.com/ui/1.11.3/themes/redmond/jquery-ui.css">
    <link rel="stylesheet" href="~/css/side-bar.css"> 
    <link rel="stylesheet" href="~/css/datatable.css">    
    <link rel="stylesheet" href="~/css/bootstrap-toggle.min.css">  

    <script src="~/js/jquery-2.1.1.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/validator.min.js"></script>
    <script src="~/js/jquery.nice-select.min.js"></script>
    <script src="~/js/bootstrap-select.min.js"></script>
    <script src="~/js/bootstrap-datepicker.min.js"></script>
    <script src="~/js/bootstrap-datepicker.zh-TW.min.js" charset="UTF-8"></script>
    <script src="~/js/jquery.dataTables.min.js"></script>
    <script src="~/js/dataTables.jqueryui.min.js"></script>
    <script src="~/js/bootstrap-toggle.min.js"></script>

    <style>
        .modal-header-success {
            color:#fff;
            padding:9px 15px;
            border-bottom:1px solid #eee;
            background-color: #5cb85c;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
             border-top-left-radius: 5px;
             border-top-right-radius: 5px;
        }
        .modal-header-warning {
	        color:#fff;
            padding:9px 15px;
            border-bottom:1px solid #eee;
            background-color: #f0ad4e;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
             border-top-left-radius: 5px;
             border-top-right-radius: 5px;
        }
        .modal-header-danger {
	        color:#fff;
            padding:9px 15px;
            border-bottom:1px solid #eee;
            background-color: #d9534f;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
             border-top-left-radius: 5px;
             border-top-right-radius: 5px;
        }
        .modal-header-info {
            color:#fff;
            padding:9px 15px;
            border-bottom:1px solid #eee;
            background-color: #5bc0de;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
             border-top-left-radius: 5px;
             border-top-right-radius: 5px;
        }
        .modal-header-primary {
	        color:#fff;
            padding:9px 15px;
            border-bottom:1px solid #eee;
            background-color: #428bca;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
             border-top-left-radius: 5px;
             border-top-right-radius: 5px;
        }
    </style>
</head>

<body>
    <!-- Sidebar -->
    <nav id="menu" class="left">
        <ul>            
            <li>
                <a href="#"><i class="fa fa-gears"></i>活動事件管理 <i class="fa fa-caret-down"></i></a>
                <ul>
                    <li><a href="@Url.Content("~/")Events/EventData" TOG >&nbsp;&nbsp;&nbsp;&nbsp;行銷活動管理</a></li>                   
                </ul>
            </li>
            <!-- 
            <li><a href="#"><i class="fa fa-info-circle"></i>About</a></li>
            -->
            <li>
                <a href="#" ><i class="fa fa-barcode"></i>碼號管理 <i class="fa fa-caret-down"></i></a>
                <ul>
                    <li><a href="@Url.Content("~/")CodeGen/CodeGenData" TOG >&nbsp;&nbsp;&nbsp;&nbsp;活動發碼管理</a></li>
                    <li><a href="@Url.Content("~/")RewardManage/RewardData" TOG >&nbsp;&nbsp;&nbsp;&nbsp;活動獎項管理</a></li>
                    <li><a href="@Url.Content("~/")EventExport/ExportData" TOG >&nbsp;&nbsp;&nbsp;&nbsp;活動資料查詢與匯出</a></li>                    
                </ul>
            </li>
            <li>
                <a href="#"><i class="fa fa-search"></i>行銷活動查詢 <i class="fa fa-caret-down"></i></a>
                <ul>
                    <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;會員中獎清單查詢</a></li>
                    <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;會員掃描分析查詢</a></li>
                    <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;會員掃描紀錄查詢</a></li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fa fa-laptop"></i>系統管理 <i class="fa fa-caret-down"></i></a>
                <ul>
                    <li><a href="#">&nbsp;&nbsp;&nbsp;&nbsp;系統使用者管理</a></li>
                    <li><a href="@Url.Content("~/")SystemBase/VenderDate" TOG>&nbsp;&nbsp;&nbsp;&nbsp;活動廠商管理</a></li>                    
                </ul>
            </li>
            <!--
            <li><a href="#"><i class="fa fa-phone"></i>Contact</a></li>
             -->
        </ul>
        <p href="#" id="showmenu" style=" font-size: 2.0em;"> <i class="fa fa-align-justify"></i> </p>
    </nav>
    <!-- Sidebar End -->

    <div id="wrapper">
        <div class="overlay"></div>

        <!-- Page Content -->
        <div id="page-content-wrapper">

            <!-- nav bar -->
            <nav class="navbar navbar-default navbar-fixed-top bg-primary">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed " data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <a class="navbar-brand" href="#" style="margin-left:40px;"><img alt="Brand" src="../logo.png" style="width:44px;height:34px;margin-top:-7px;display:none;" /></a>
                    <label class="navbar-text text-center text-primary" style="vertical-align:10px;font-size:x-large;color:#fff;margin-top:5px;margin-left:0px;">@lan.ApplicationTitle</label>
                </div>
                <!-- navbar -->
                <div id="navbar" class="navbar-collapse collapse navbar-custom">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">@lan.SystemMessage</a></li>
                         <!--
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                        -->
                        <!--
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">常用集 <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Nav header</li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                        -->
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <!--
                        <li><a href="../navbar/">Default</a></li>
                        <li><a href="../navbar-static-top/">Static top</a></li>
                        -->
                        <li class="active"><a href="#">@lan.Logout<span class="sr-only">(current)</span></a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">@lan.Language <b class="caret"></b></a>
                            <ul class="dropdown-menu pull-right">
                                <li><a href="javascript:void(0);" onclick="onLanguageChanged('TW')">@lan.TW</a></li>
                                <li><a href="javascript:void(0);" onclick="onLanguageChanged('EN')">@lan.EN</a></li>
                                <li><a href="javascript:void(0);" onclick="onLanguageChanged('CN')">@lan.CN</a></li>                               
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- nav bar end -->

            @RenderBody()

        </div>
        <!-- Page Content End-->
    </div>

    <!-- Modal -->
    <div id="qModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div id="mdl_header" class="modal-header modal-header-info">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 id="mdl_title" class="modal-title">Modal Header</h4>
                </div>
                <div class="modal-body" style="word-break: break-all;">
                   <p id="mdl_message" style="font-size:20px;"> Some text in the modal.</p>
                </div>
                <div class="modal-footer">
                    <button id="btn_OK" type="button" class="btn btn-primary" data-dismiss="modal" onclick="onModalOK();">&nbsp;&nbsp;@lan.OK&nbsp;&nbsp;</button>
                    <button id="btn_Yes" type="button" class="btn btn-danger" data-dismiss="modal" onclick="onMoadlYes();">&nbsp;&nbsp;@lan.Yes&nbsp;&nbsp;</button>
                    <button id="btn_No" type="button" class="btn btn-default" data-dismiss="modal" onclick="onModalNo();">&nbsp;&nbsp;@lan.No&nbsp;&nbsp;</button>
                </div>
            </div>

        </div>
    </div>

    @*
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    *@

    @RenderSection("scripts", required: false)

    <script>

        var modalHanlder;
        var actionCode;
        var autoHide;
        var pedding = false;
        var editMode; /*A,U,''*/
        
        $("#showmenu").click(function (e) {

            e.preventDefault();
            overlay = $('.overlay');
            $("#menu").toggleClass("show");

            if ($("#menu").hasClass("show")) {
                $('#menu').css("boxShadow", "10px 0px 40px #2F2F2F");
                overlay.show();
                $("#showmenu").hide();
            } else {
                $('#menu').css("boxShadow", "0px 0px 0px #2F2F2F");
                overlay.hide();               
            }

            //if ($('#menu').hasClass("boxShadow")) {
            //    $('#menu').removeClass("boxShadow");
            // } else {
            //     $('#menu').css("boxShadow", "10px 0px 40px #888888");
            // }           
        });

        $("#menu a").click(function (event) {

            //alert($(this).text());
            var attr = $(this).attr('TOG');
            
            if (typeof attr !== typeof undefined && attr !== false) {
                
            } else {
                event.preventDefault();
                if ($(this).next('ul').length) {
                    $(this).next().toggle('fast');
                    $(this).children('i:last-child').toggleClass('fa-caret-down fa-caret-left');
                }
            }
        });

        $(document).ready(function () {
            
            $('[data-toggle="offcanvas"]').click(function () {
                $('#wrapper').toggleClass('toggled');
            });

            $(".overlay").bind("click", function () {
               
                //overlay = $('.overlay');
                //$('#wrapper').toggleClass('toggled');
                $("#menu").toggleClass("show");
                $('#menu').css("boxShadow", "0px 0px 0px #2F2F2F");
                $(this).hide();
                $("#showmenu").show();
            });
        });

        function onLanguageChanged(lan)
        {
            var data = { "lan": lan };
            $.ajax({
                async: false,
                type: "POST",
                url: '@Url.Content("~/")system/SetLanguage',
                data: data,
                dataType: 'json',
                success: function (data, status, xhr) {

                    jDatas = jQuery.parseJSON(data);
                    if (jDatas.length == 1) {
                        window.location.reload();
                    } else {
                        if (jDatas.ErrorMessage) {                          
                            showQMoal('e', false, jDatas.ErrorMessage, 0, null);
                        }
                    }
                },
                error: function (request, error) {
                    alert(error + " : " + request.responseText);
                },
                complete: function () {
                    hideLoadingBar();
                }
            });
        }

        function onModalOK() {
           
            if (modalHanlder != null) {
                //|| typeof(modalHanlder) != "undefined") {
                modalHanlder(actionCode);
            }
            autoHide = true;
            $("#qModal").modal('hide');
        }

        function onMoadlYes() {
            if (modalHanlder != null) {
                modalHanlder(actionCode, 'y');
            }
            if (pedding) {
                pedding = false;
                //autoHide = true;
                //$("#qModal").modal('hide');
            } else {
                autoHide = true;
                $("#qModal").modal('hide');
            }
            
        }

        function onModalNo() {
            if (modalHanlder != null) {
                modalHanlder(actionCode, 'n');
            }
            autoHide = true;
            $("#qModal").modal('hide');
        }

        function peddingHide() {
            pedding = true;
        }

        function showQMoal(type, autohide , msg, action, handler) {

            $("#mdl_header").removeClass('modal-header-success');
            $("#mdl_header").removeClass('modal-header-warning');
            $("#mdl_header").removeClass('modal-header-danger');
            $("#mdl_header").removeClass('modal-header-info');
            $("#mdl_header").removeClass('modal-header-primary');

            actionCode = action;
            modalHanlder = handler;
            autoHide = autohide;
           
            $("#btn_OK").hide();
            $("#btn_Yes").hide();
            $("#btn_No").hide();

            if (type == 'q') {
                $("#mdl_header").addClass('modal-header-primary');                
                $("#btn_Yes").show();
                $("#btn_No").show();
                $("#mdl_title").text('詢問視窗');
            } else if (type == 'i') {
                $("#mdl_header").addClass('modal-header-info');
                $("#btn_OK").show();
                $("#mdl_title").text('通知視窗');
            } else if (type == 'e') {
                $("#mdl_header").addClass('modal-header-danger');
                $("#btn_OK").show();
                $("#mdl_title").text('錯誤視窗');
            } else if (type == 'w') {
                $("#mdl_header").addClass('modal-header-warning');
                $("#btn_OK").show();
                $("#mdl_title").text('警告視窗');
            }

            $("#mdl_message").text(msg);
            
            $("#qModal").modal('show');
        }

        jQuery('#qModal').on('hide.bs.modal', function () {
           
            return autoHide;           
        });

        function showLoadingBar() {
            $("#img_bar").show();
        }

        function hideLoadingBar() {
            $("#img_bar").hide();
        }

    </script>

</body>
</html>


